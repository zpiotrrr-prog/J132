ğŸ³ DOCKER SETUP & INSTALLATION GUIDE - MongoDB
==============================================

Project Database: recipes
App Port: 3000
MongoDB Port: 27017
MongoDB Version: 6.0

For complete project description, see: README.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUICK START (RECOMMENDED)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Run this single command to start MongoDB:

  docker run -d \
    --name recipes-mongo \
    -p 27017:27017 \
    -v mongo-recipes-data:/data/db \
    mongo:6.0

This will:
  âœ“ Start MongoDB 6.0 in background
  âœ“ Container name: recipes-mongo
  âœ“ Port: 27017 (host:container)
  âœ“ Data volume: mongo-recipes-data
  âœ“ Network: accessible on localhost
  
Create Connection in MongoDB named recipes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB CONNECTION DETAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Connection String:
  mongodb://localhost:27017

Database Name:
  recipes

Collections:
  - recipes     (cooking recipes)
  - comments    (recipe comments)

Authentication:
  âœ“ MongoDB 6.0 runs without authentication by default
  âœ“ Suitable for local development
  âš  For production, see: "Production Security" section


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
STEP-BY-STEP INSTALLATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1: Verify Docker is installed
  docker --version
  docker ps

Step 2: Pull MongoDB image (optional, docker run does this)
  docker pull mongo:6.0

Step 3: Run MongoDB container
  docker run -d \
    --name recipes-mongo \
    -p 27017:27017 \
    -v mongo-recipes-data:/data/db \
    mongo:6.0

Step 4: Verify MongoDB is running
  docker ps
  (Look for "recipes-mongo" in the list)

Step 5: Navigate to project
  cd c:\Users\User\Desktop\SZKOLA\node\Projekt

Step 6: Install Node dependencies
  npm install

Step 7: Start Node application
  npm start

Step 8: Open in browser
  http://localhost:3000

âœ… Done! Application is running.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB PORT MAPPING EXPLAINED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Flag: -p 27017:27017

  -p HOST_PORT:CONTAINER_PORT
  
  27017  = Port on your computer (host)
  27017  = Port inside Docker container
  
  Mapping: localhost:27017 â†’ Docker container:27017

Alternative Port Mapping:
  
  docker run -d \
    --name recipes-mongo \
    -p 27018:27017 \
    -v mongo-recipes-data:/data/db \
    mongo:6.0
  
  This maps: localhost:27018 â†’ container:27017
  Update src/data/connection.js to: mongodb://localhost:27018


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB AUTHENTICATION (Optional for Production)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

To enable authentication:

  docker run -d \
    --name recipes-mongo \
    -p 27017:27017 \
    -v mongo-recipes-data:/data/db \
    -e MONGO_INITDB_ROOT_USERNAME=admin \
    -e MONGO_INITDB_ROOT_PASSWORD=securepw123 \
    mongo:6.0

Connection with auth:
  mongodb://admin:securepw123@localhost:27017

Update src/data/connection.js:
  const uri = 'mongodb://admin:securepw123@localhost:27017';


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DOCKER COMMANDS REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Check Status:
  docker ps                     # Running containers
  docker ps -a                  # All containers (stopped too)

Start/Stop Container:
  docker start recipes-mongo    # Start stopped container
  docker stop recipes-mongo     # Stop running container
  docker restart recipes-mongo  # Restart container

View Information:
  docker logs recipes-mongo     # View container logs
  docker logs -f recipes-mongo  # Follow logs in real-time
  docker inspect recipes-mongo  # Detailed container info

Remove/Clean:
  docker rm recipes-mongo       # Remove container (keeps data)
  docker volume rm mongo-recipes-data  # Delete data volume
  docker system prune           # Clean all unused resources

Port Verification:
  # Windows
  netstat -ano | findstr :27017
  
  # macOS/Linux
  lsof -i :27017


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB SHELL ACCESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Connect to MongoDB (requires mongosh installed):
  mongosh mongodb://localhost:27017

Or connect inside container:
  docker exec -it recipes-mongo mongosh

Common Commands:
  show dbs                      # List all databases
  use recipes                   # Switch to recipes database
  show collections              # List collections
  db.recipes.find()             # Find all recipes
  db.comments.find()            # Find all comments
  db.recipes.find().pretty()    # Pretty-print results
  db.recipes.insertOne({...})   # Insert a document
  db.recipes.deleteMany({})     # Delete all documents
  db.recipes.drop()             # Drop entire collection


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
VOLUME & DATA PERSISTENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Volume Management:
  docker volume ls              # List all volumes
  docker volume inspect mongo-recipes-data  # Details
  docker volume rm mongo-recipes-data  # Delete volume

Data Persistence:
  âœ“ Volume mongo-recipes-data persists data
  âœ“ Survives container stop/start
  âœ— Deleted only with: docker volume rm

Bind Mount (Alternative to Volume):
  docker run -d \
    --name recipes-mongo \
    -p 27017:27017 \
    -v /path/to/data:/data/db \
    mongo:6.0
  
  Replace /path/to/data with actual path


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DOCKER COMPOSE (Alternative to docker run)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create file: docker-compose.yml

  version: '3.8'
  
  services:
    mongodb:
      image: mongo:6.0
      container_name: recipes_mongo
      restart: always
      ports:
        - "27017:27017"
      volumes:
        - mongo_recipes_data:/data/db
      environment:
        - MONGO_INITDB_DATABASE=recipes
      networks:
        - recipes_network
  
  volumes:
    mongo_recipes_data:
      driver: local
  
  networks:
    recipes_network:
      driver: bridge

Run:
  docker-compose up -d

Stop:
  docker-compose down

View logs:
  docker-compose logs -f mongodb


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB NETWORK ACCESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Connection Sources:
  
  âœ“ From host machine:
    mongodb://localhost:27017
    mongodb://127.0.0.1:27017
  
  âœ“ From other Docker container (same network):
    mongodb://recipes-mongo:27017  (use container name)
  
  âœ— From remote server:
    Not accessible by default (Docker isolates containers)

To access from other containers:
  docker run --network recipes_network ...


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Problem: "Cannot connect to MongoDB"
  Solution:
    1. Check Docker running: docker ps
    2. Check container active: docker ps | grep recipes-mongo
    3. Check logs: docker logs recipes-mongo
    4. Verify connection string in src/data/connection.js

Problem: "Port 27017 already in use"
  Solution:
    1. Stop existing container: docker stop recipes-mongo
    2. Or use different port: -p 27018:27017
    3. Update connection string to: mongodb://localhost:27018

Problem: "Docker command not found"
  Solution:
    1. Install Docker Desktop
    2. Add Docker to PATH environment variable
    3. Restart terminal
    4. Verify: docker --version

Problem: "Container exits immediately"
  Solution:
    1. Check logs: docker logs recipes-mongo
    2. Common issues: port conflict, volume permission
    3. Try with different port: -p 27018:27017

Problem: "Permission denied accessing volume"
  Solution (macOS/Linux):
    sudo chown -R 999:999 /path/to/volume
  
  Solution (Windows):
    Docker Desktop handles permissions automatically

Problem: "Data lost after stopping container"
  Solution:
    âœ“ Always use volumes: -v mongo-recipes-data:/data/db
    âœ“ Don't use: docker rm (use docker stop instead)
    âœ“ Check volume exists: docker volume ls

Problem: "mongosh: command not found"
  Solution:
    1. Install mongosh: npm install -g mongosh
    2. Or access via container: docker exec -it recipes-mongo mongosh


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MONGODB BACKUP & RESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Backup Database:
  docker exec recipes-mongo mongodump \
    --out /tmp/backup \
    --db recipes
  
  docker cp recipes-mongo:/tmp/backup ./backup

Restore Database:
  docker cp ./backup recipes-mongo:/tmp/
  
  docker exec recipes-mongo mongorestore \
    --db recipes \
    /tmp/backup/recipes


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DEVELOPMENT SETUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Install nodemon for auto-restart on file changes:
  npm install --save-dev nodemon

Add to package.json:
  "dev": "nodemon src/server.js"

Run development:
  npm run dev

This will restart Node when you change code.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRODUCTION SECURITY (Best Practices)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš  DO NOT use default MongoDB in production!

Secure MongoDB Setup:
  
  docker run -d \
    --name recipes-mongo \
    -p 27017:27017 \
    -v mongo-recipes-data:/data/db \
    -e MONGO_INITDB_ROOT_USERNAME=admin \
    -e MONGO_INITDB_ROOT_PASSWORD=<strong-password> \
    -e MONGO_INITDB_DATABASE=recipes \
    --network production-network \
    mongo:6.0 --auth

Best Practices:
  âœ“ Always use authentication
  âœ“ Use strong passwords
  âœ“ Restrict network access
  âœ“ Keep MongoDB updated
  âœ“ Regular backups
  âœ“ Monitor logs
  âœ“ Use environment variables for secrets
  âœ“ Don't expose port publicly


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CLEANUP & RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Stop Everything:
  docker stop recipes-mongo

Remove Container (keeps data):
  docker rm recipes-mongo

Remove Data (deletes everything):
  docker volume rm mongo-recipes-data
  docker rm recipes-mongo

Complete Reset:
  docker stop recipes-mongo
  docker rm recipes-mongo
  docker volume rm mongo-recipes-data
  docker pull mongo:6.0

Then start fresh with Quick Start command.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FINAL CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Before running the application:

  â˜ Docker is installed (docker --version)
  â˜ Docker Desktop is running
  â˜ MongoDB container is active (docker ps)
  â˜ Port 27017 is accessible
  â˜ Node.js v14+ is installed (node --version)
  â˜ npm install completed without errors
  â˜ npm start runs without errors
  â˜ App is accessible at http://localhost:3000
  â˜ MongoDB connection shows in logs (no errors)
  â˜ Can create a recipe
  â˜ Can add comment to recipe
  â˜ Can delete recipe
  â˜ Data persists after restart

All checked? You're ready to go! ğŸ‰


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
QUICK REFERENCE CHEATSHEET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Start MongoDB:
  docker run -d --name recipes-mongo -p 27017:27017 -v mongo-recipes-data:/data/db mongo:6.0

Check status:
  docker ps | grep recipes-mongo

View logs:
  docker logs recipes-mongo

Stop:
  docker stop recipes-mongo

Start:
  docker start recipes-mongo

Connect (inside container):
  docker exec -it recipes-mongo mongosh

Remove:
  docker rm recipes-mongo

Clean all:
  docker system prune -a


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RESOURCES & DOCUMENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Docker:
  https://docs.docker.com/
  https://docs.docker.com/engine/reference/commandline/run/

MongoDB:
  https://docs.mongodb.com/
  https://docs.mongodb.com/manual/introduction/
  https://hub.docker.com/_/mongo

MongoDB Shell (mongosh):
  https://www.mongodb.com/products/shell
  https://docs.mongodb.com/mongodb-shell/

Node.js MongoDB Driver:
  https://docs.mongodb.com/drivers/node/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

For full project details, see: README.md
Questions? Check Docker and MongoDB documentation above.
